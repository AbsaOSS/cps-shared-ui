<div class="cps-input-container" [ngStyle]="{ width: cvtWidth }">
  <label
    class="cps-input-label-text"
    [ngClass]="{ 'cps-input-label-text-disabled': disabled }"
    >{{ label }}</label
  >

  <div
    class="cps-input-wrap"
    [ngClass]="{
      password: type === 'password',
      'cps-input-wrap-error': error,
      clearable: clearable,
      'persistent-clear': persistentClear
    }">
    <input
      [type]="currentType"
      [value]="value"
      (input)="updateValueEvent($event)"
      [placeholder]="placeholder"
      [disabled]="disabled"
      [ngStyle]="{
        width: cvtWidth,
        'padding-left': prefixWidth || 'none'
      }"
      (blur)="onBlur()"
      (focus)="onFocus()" />

    <div class="cps-input-prefix">
      <span *ngIf="prefixIcon" class="cps-input-prefix-icon">
        <cps-icon
          [icon]="prefixIcon"
          [size]="prefixIconSize"
          [style.cursor]="
            prefixIconClickable && !disabled ? 'pointer' : 'default'
          "
          (click)="onClickPrefixIcon()">
        </cps-icon>
      </span>

      <span *ngIf="prefixText" class="cps-input-prefix-text" #prefixTextSpan>
        {{ prefixText }}
      </span>
    </div>

    <div class="cps-input-action-btns" *ngIf="!disabled">
      <span
        *ngIf="clearable"
        [style.visibility]="
          persistentClear || (!persistentClear && value) ? 'visible' : 'hidden'
        "
        class="clear-btn">
        <cps-icon icon="delete" size="small" (click)="clear()"></cps-icon>
      </span>

      <span
        *ngIf="type === 'password'"
        class="password-show-btn"
        [ngClass]="{ 'password-show-btn-active': currentType === 'text' }">
        <cps-icon icon="eye" size="18px" (click)="togglePassword()"></cps-icon>
      </span>
    </div>
    <cps-progress-linear
      *ngIf="loading"
      height="3"
      radius="4"
      opacity="0.3"
      class="cps-input-progress-bar"
      bgColor="transparent">
    </cps-progress-linear>
  </div>
  <div *ngIf="!error && !hideDetails" class="cps-input-hint-text">
    {{ hint }}
  </div>
  <div *ngIf="error && !hideDetails" class="cps-input-error-text">
    {{ error }}
  </div>
</div>
