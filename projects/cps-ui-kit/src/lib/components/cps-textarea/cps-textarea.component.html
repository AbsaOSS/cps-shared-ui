<div class="cps-textarea-container" [ngStyle]="{ width: cvtWidth }">
  <div
    class="cps-textarea-label"
    [ngClass]="{ 'cps-textarea-label-disabled': disabled }"
    *ngIf="label">
    <label>{{ label }}</label>
    <cps-info-circle
      *ngIf="infoTooltip"
      class="cps-textarea-label-info-circle"
      size="xsmall"
      [tooltipPosition]="infoTooltipPosition"
      [tooltipContentClass]="infoTooltipClass"
      [tooltipMaxWidth]="infoTooltipMaxWidth"
      [tooltipPersistent]="infoTooltipPersistent"
      [tooltipText]="infoTooltip">
    </cps-info-circle>
  </div>

  <div
    class="cps-textarea-wrap"
    [ngClass]="{
      'cps-textarea-wrap-error': error,
      clearable: clearable,
      'persistent-clear': persistentClear
    }">
    <textarea
      spellcheck="false"
      [cols]="cols"
      [rows]="rows"
      [autofocus]="autofocus"
      [disabled]="disabled"
      [placeholder]="placeholder"
      [value]="value"
      [ngStyle]="{
        width: cvtWidth,
        resize: resizable
      }"
      (blur)="onBlur()"
      (focus)="onFocus()"
      (input)="updateValueEvent($event)"></textarea>

    <span
      *ngIf="clearable && !disabled"
      [style.visibility]="
        persistentClear || (!persistentClear && value) ? 'visible' : 'hidden'
      "
      class="clear-btn">
      <cps-icon icon="delete" size="small" (click)="clear()"></cps-icon>
    </span>
  </div>
  <div *ngIf="!error && !hideDetails" class="cps-textarea-hint">
    {{ hint }}
  </div>
  <div *ngIf="error && !hideDetails" class="cps-textarea-error">
    {{ error }}
  </div>
</div>
