<div class="cps-btn-toggle">
  <div class="cps-btn-toggle-label" *ngIf="label">
    <span>{{ label }}</span>
    <cps-info-circle
      *ngIf="tooltip"
      class="cps-btn-toggle-label-info-circle"
      size="xsmall"
      tooltipPosition="top"
      [tooltipContentClass]="tooltipClass"
      [tooltipText]="tooltip">
    </cps-info-circle>
  </div>
  <div class="cps-btn-toggle-content">
    <ng-container *ngFor="let option of options">
      <ng-container
        *ngTemplateOutlet="
          optionContainerTemplate;
          context: {
            option: option,
            tooltip: option.tooltip
          }
        "></ng-container>
    </ng-container>
  </div>
</div>

<ng-template #optionContainerTemplate let-option="option" let-tooltip="tooltip">
  <label
    class="cps-btn-toggle-content-option"
    *ngIf="tooltip"
    [cpsTooltip]="option.tooltip"
    tooltipCloseDelay="0"
    tooltipPosition="bottom">
    <ng-container
      *ngTemplateOutlet="
        optionRadioTemplate;
        context: {
          option: option
        }
      "></ng-container>
  </label>
  <label class="cps-btn-toggle-content-option" *ngIf="!tooltip">
    <ng-container
      *ngTemplateOutlet="
        optionRadioTemplate;
        context: {
          option: option
        }
      "></ng-container>
  </label>
</ng-template>

<ng-template #optionRadioTemplate let-option="option">
  <input
    class="cps-btn-toggle-content-option-input"
    [type]="!multiple && mandatory ? 'radio' : 'checkbox'"
    [disabled]="option.disabled || disabled"
    [value]="option.value"
    [checked]="
      option.value | checkOptionSelected : value : multiple : true : ''
    "
    (change)="updateValueEvent($event)" />
  <span class="cps-btn-toggle-content-option-content">
    <span>{{ option.label }}</span>
  </span>
</ng-template>
