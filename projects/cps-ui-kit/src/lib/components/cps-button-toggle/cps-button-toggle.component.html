<div class="cps-btn-toggle">
  @if (label) {
    <div class="cps-btn-toggle-label">
      <span>{{ label }}</span>
      @if (infoTooltip) {
        <cps-info-circle
          class="cps-btn-toggle-label-info-circle"
          size="xsmall"
          [tooltipPosition]="infoTooltipPosition"
          [tooltipContentClass]="infoTooltipClass"
          [tooltipMaxWidth]="infoTooltipMaxWidth"
          [tooltipPersistent]="infoTooltipPersistent"
          [tooltipText]="infoTooltip">
        </cps-info-circle>
      }
    </div>
  }
  <div class="cps-btn-toggle-content">
    @for (option of options; track option) {
      <ng-container
        *ngTemplateOutlet="
          optionContainerTemplate;
          context: {
            option: option,
            tooltip: option.tooltip
          }
        "></ng-container>
    }
  </div>
</div>

<ng-template #optionContainerTemplate let-option="option" let-tooltip="tooltip">
  @if (tooltip) {
    <label
      class="cps-btn-toggle-content-option"
      [cpsTooltip]="option.tooltip"
      tooltipCloseDelay="0"
      [tooltipPosition]="optionTooltipPosition">
      <ng-container
        *ngTemplateOutlet="
          optionRadioTemplate;
          context: {
            option: option
          }
        "></ng-container>
    </label>
  }
  @if (!tooltip) {
    <label class="cps-btn-toggle-content-option">
      <ng-container
        *ngTemplateOutlet="
          optionRadioTemplate;
          context: {
            option: option
          }
        "></ng-container>
    </label>
  }
</ng-template>

<ng-template #optionRadioTemplate let-option="option">
  <input
    class="cps-btn-toggle-content-option-input"
    [type]="!multiple && mandatory ? 'radio' : 'checkbox'"
    [disabled]="option.disabled || disabled"
    [value]="option.value"
    [checked]="option.value | checkOptionSelected: value : multiple : true : ''"
    (change)="updateValueEvent($event, option.value)" />
  <span
    class="cps-btn-toggle-content-option-content"
    [ngStyle]="{
      'min-width': largestButtonWidth ? largestButtonWidth + 'px' : 'none'
    }">
    @if (option.icon) {
      <cps-icon [ngClass]="{ 'me-2': !!option.label }" [icon]="option.icon">
      </cps-icon>
    }
    @if (option.label) {
      <span>{{ option.label }}</span>
    }
  </span>
</ng-template>
