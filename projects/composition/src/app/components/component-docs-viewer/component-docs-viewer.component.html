<cps-tab-group
  tabsBackground="bg-light"
  animationType="fade"
  (afterTabChanged)="changeTab($event)"
  [selectedIndex]="selectedTabIndex">
  <cps-tab label="Examples">
    <div class="example-content">
      <ng-content></ng-content>
    </div>
  </cps-tab>
  <cps-tab label="API">
    @if (componentData) {
      @if (
        componentData.components &&
        (componentData.components | objectEntries).length > 0
      ) {
        @for (data of componentData.components | objectEntries; track data) {
          <div>
            <h1>{{ data[0] }}</h1>
            <p>{{ data[1].description }}</p>
            <!-- Input Props -->
            <div>
              <h2>Properties</h2>
              <p>{{ data[1].props.description }}</p>
              <div>
                <table class="data-table">
                  <thead>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Default value</th>
                    <th>Description</th>
                  </thead>
                  <tbody>
                    @for (prop of data[1].props.values; track prop) {
                      <tr>
                        <td class="highlighted-bg">
                          <span>{{ prop.name }}</span>
                        </td>
                        <td class="highlighted-text">
                          @if (prop.type | detectType: TypesMap; as type) {
                            <a
                              [routerLink]="'/' + TypesMap[type] + '/api'"
                              fragment="{{ type }}"
                              >{{ prop.type }}</a
                            >
                          } @else {
                            <span>{{ prop.type }}</span>
                          }
                        </td>
                        <td class="value-style">
                          <span>{{
                            (prop.default === '' ? "''" : prop.default) ??
                              'undefined'
                          }}</span>
                        </td>
                        <td>{{ prop.description }}</td>
                      </tr>
                    }
                  </tbody>
                </table>
              </div>
              <!-- Emits -->
              @if (data[1].emits) {
                <div>
                  <h2>Events</h2>
                  <p>{{ data[1].emits.description }}</p>
                  <div>
                    <table class="data-table">
                      <thead>
                        <th>Name</th>
                        <th>Parameters</th>
                        <th>Description</th>
                      </thead>
                      <tbody>
                        @for (event of data[1].emits.values; track event) {
                          <tr>
                            <td class="highlighted-bg">
                              <span>{{ event.name }}</span>
                            </td>
                            <td class="highlighted-text">
                              @if (
                                event.parameters[0].type | detectType: TypesMap;
                                as type
                              ) {
                                <a
                                  [routerLink]="'/' + TypesMap[type] + '/api'"
                                  fragment="{{ type }}"
                                  >{{ event.parameters[0].type }}</a
                                >
                              } @else {
                                <span>{{ event.parameters[0].type }}</span>
                              }
                            </td>
                            <td>{{ event.description }}</td>
                          </tr>
                        }
                      </tbody>
                    </table>
                  </div>
                </div>
              }
            </div>
          </div>
        }
        <!-- Types -->
        @if (
          componentData.types &&
          componentData.types.values &&
          componentData.types.values.length > 0
        ) {
          <div>
            <h2>Types</h2>
            <p>{{ componentData.types.description }}</p>
            <div>
              <table class="data-table">
                <thead>
                  <th>Name</th>
                  <th>Values</th>
                  <th>Description</th>
                </thead>
                <tbody>
                  @for (type of componentData.types.values; track type) {
                    <tr id="{{ type.name }}">
                      <td class="highlighted-bg">
                        <span>{{ type.name }}</span>
                      </td>
                      <td class="highlighted-text">
                        {{ type.value }}
                      </td>
                      <td>{{ type.description }}</td>
                    </tr>
                  }
                </tbody>
              </table>
            </div>
          </div>
        }
      }
      <!-- Interfaces -->
      @if (
        componentData.interfaces &&
        componentData.interfaces.values &&
        componentData.interfaces.values.length > 0
      ) {
        <div>
          <h2>Interfaces</h2>
          <p>{{ componentData.interfaces.description }}</p>
          @for (
            interface of componentData.interfaces.values;
            track interface.name
          ) {
            <div id="{{ interface.name }}">
              <h3>{{ interface.name }}</h3>
              <p>{{ interface.description }}</p>
              <table class="data-table">
                <thead>
                  <th>Name</th>
                  <th>Type</th>
                  <th>Description</th>
                </thead>
                <tbody>
                  @for (prop of interface.props; track prop) {
                    <tr>
                      <td class="highlighted-bg">
                        <span>{{ prop.name }}</span>
                      </td>
                      <td class="highlighted-text">
                        @if (prop.type | detectType: TypesMap; as type) {
                          <a
                            [routerLink]="'/' + TypesMap[type] + '/api'"
                            fragment="{{ type }}"
                            >{{ prop.type }}</a
                          >
                        } @else {
                          <span>{{ prop.type }}</span>
                        }
                      </td>
                      <td>{{ prop.description }}</td>
                    </tr>
                  }
                </tbody>
              </table>
            </div>
          }
        </div>
      }
      <!-- Enums -->
      <app-enums [enums]="componentData.enums"></app-enums>
    }
  </cps-tab>
</cps-tab-group>
